# ğŸ¯ Chá»©c nÄƒng QuÃ©t QR Code - HÆ°á»›ng dáº«n Nhanh

## âœ… ÄÃ£ cÃ i Ä‘áº·t xong

á»¨ng dá»¥ng GreenMate Box hiá»‡n Ä‘Ã£ cÃ³ chá»©c nÄƒng **quÃ©t mÃ£ QR** Ä‘á»ƒ nháº­n Ä‘iá»ƒm tá»« cÃ¡c mÃ¡y tÃ¡i cháº¿ rÃ¡c.

## ğŸš€ CÃ¡ch sá»­ dá»¥ng

### **BÆ°á»›c 1: Má»Ÿ á»©ng dá»¥ng**
```
GreenMate Box â†’ Tab "Scan" (biá»ƒu tÆ°á»£ng camera)
```

### **BÆ°á»›c 2: Nháº¥n "Báº¯t Ä‘áº§u quÃ©t"**
```
Button "Báº¯t Ä‘áº§u quÃ©t" 
â†“
Cho phÃ©p quyá»n truy cáº­p camera
```

### **BÆ°á»›c 3: HÆ°á»›ng camera vÃ o QR code**
```
Giá»¯ mÃ¡y á»Ÿ khoáº£ng 15-30cm tá»« mÃ£ QR
Äáº£m báº£o mÃ£ QR náº±m trong khung xanh
```

### **BÆ°á»›c 4: Káº¿t quáº£**
```
âœ“ QuÃ©t thÃ nh cÃ´ng!

Hiá»ƒn thá»‹:
  +50 ÄIá»‚M THÆ¯á»NG
  ğŸ¾ 10 chai
  ğŸ’¨ 0.8kg COâ‚‚
```

### **BÆ°á»›c 5: Tiáº¿p tá»¥c hoáº·c thoÃ¡t**
```
Nháº¥n "QuÃ©t tiáº¿p" â†’ QuÃ©t QR khÃ¡c
Hoáº·c â† Quay láº¡i card káº¿t quáº£
```

---

## ğŸ“ Format QR Code

QR code pháº£i chá»©a má»™t trong hai Ä‘á»‹nh dáº¡ng:

### **Format 1: Sá»‘ Ä‘Æ¡n giáº£n** âœ…
```
50
100
250
500
```

### **Format 2: JSON** âœ…
```json
{"points":50,"machineId":"CS1"}
{"points":100,"machineId":"CS2"}
```

### **Lá»—i Format** âŒ
```
abc          â†’ KhÃ´ng pháº£i sá»‘
-50          â†’ Sá»‘ Ã¢m (invalid)
0            â†’ Zero (invalid)
50.5         â†’ Tháº­p phÃ¢n (sáº½ Ä‘Æ°á»£c lÃ m trÃ²n)
```

---

## ğŸ¨ Giao diá»‡n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•                       Scan   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚        ğŸ“¹ (CAMERA LIVE)         â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚        â”‚   QR FRAME    â”‚        â”‚
â”‚        â”‚   (Green)     â”‚        â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                 â”‚
â”‚   "HÆ°á»›ng vÃ o mÃ£ QR..."          â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Sau khi quÃ©t:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      +50                        â”‚
â”‚   ÄIá»‚M THÆ¯á»NG                   â”‚
â”‚                                 â”‚
â”‚   ğŸ¾ 10    |    ğŸ’¨ 0.8kg COâ‚‚    â”‚
â”‚                                 â”‚
â”‚   [  QuÃ©t tiáº¿p  ]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ CÃ i Ä‘áº·t Dependencies

### BÆ°á»›c 1: CÃ i expo-camera
```bash
npm install expo-camera
```

Hoáº·c náº¿u dÃ¹ng expo:
```bash
expo install expo-camera
```

### BÆ°á»›c 2: Rebuild á»©ng dá»¥ng
```bash
npm start
# Android: a
# iOS: i
# Web: w
```

---

## ğŸ“Š Dá»¯ liá»‡u sau quÃ©t

| TrÆ°á»ng | TÃ­nh toÃ¡n | VÃ­ dá»¥ |
|--------|----------|-------|
| Äiá»ƒm | Tá»« QR code | 50 |
| Chai | points Ã· 5 | 50 Ã· 5 = 10 |
| COâ‚‚ | chai Ã— 0.08 | 10 Ã— 0.08 = 0.8kg |
| Lá»‹ch sá»­ | Tá»± Ä‘á»™ng lÆ°u | "QuÃ©t QR - MÃ¡y rÃ¡c #..." |

---

## ğŸ§ª Test QR Code Online

### Táº¡o QR code:
1. VÃ o: https://www.qr-code-generator.com/
2. Chá»n "Text"
3. Nháº­p: `50` hoáº·c `{"points":100}`
4. Download áº£nh
5. Test quÃ©t

### Hoáº·c dÃ¹ng cÃ´ng cá»¥ táº¡o nhanh:
```bash
# Sá»­ dá»¥ng qrencode (náº¿u cÃ i)
qrencode -o test.png "50"
qrencode -o test.png '{"points":100}'
```

---

## âš™ï¸ Cáº¥u hÃ¬nh trong Code

**File**: `App.js`

**Import**:
```javascript
import { CameraView, useCameraPermissions } from 'expo-camera';
```

**Hook**:
```javascript
const [permission, requestPermission] = useCameraPermissions();
```

**HÃ m chÃ­nh**:
- `handleScan()` - Má»Ÿ camera
- `handleQRScanned(data)` - Xá»­ lÃ½ dá»¯ liá»‡u QR

---

## ğŸ› Troubleshooting

| Lá»—i | NguyÃªn nhÃ¢n | Giáº£i phÃ¡p |
|-----|-------------|----------|
| Camera khÃ´ng má»Ÿ | ChÆ°a cáº¥p quyá»n | Settings â†’ Camera â†’ Allow |
| "QR khÃ´ng há»£p lá»‡" | Sá»‘ <= 0 | Kiá»ƒm tra QR content |
| QuÃ©t khÃ´ng pháº£n á»©ng | Äá»™ sÃ¡ng tháº¥p | NÃ¢ng Ä‘á»™ sÃ¡ng, gáº§n hÆ¡n |
| ÄÃ³ng camera tá»± Ä‘á»™ng | Lá»—i xá»­ lÃ½ | Nháº¥n "Báº¯t Ä‘áº§u quÃ©t" láº¡i |

---

## ğŸ“± Platform Support

| Platform | Há»— trá»£ | Ghi chÃº |
|----------|--------|--------|
| ğŸ iOS | âœ… | iOS 13+ |
| ğŸ¤– Android | âœ… | Android 5+ |
| ğŸ’» Web | âŒ | KhÃ´ng há»— trá»£ |

---

## ğŸ¯ TÃ­nh nÄƒng

- âœ… Má»Ÿ camera tá»± Ä‘á»™ng
- âœ… QuÃ©t QR code in real-time
- âœ… Parse JSON hoáº·c sá»‘
- âœ… Cáº­p nháº­t Ä‘iá»ƒm tá»©c thÃ¬
- âœ… TÃ­nh COâ‚‚ tiáº¿t kiá»‡m
- âœ… LÆ°u lá»‹ch sá»­
- âœ… Animation pháº£n há»“i
- âœ… Xá»­ lÃ½ lá»—i toÃ n diá»‡n

---

## ğŸ“š TÃ i liá»‡u

- **QR_CODE_GUIDE.md** - HÆ°á»›ng dáº«n chi tiáº¿t
- **QR_FEATURE_SUMMARY.md** - TÃ³m táº¯t cáº­p nháº­t
- **QR_TEST_GUIDE.sh** - HÆ°á»›ng dáº«n test

---

## ğŸš€ Next Steps

1. **Test quÃ©t trÃªn Ä‘iá»‡n thoáº¡i tháº­t**
   ```
   npm start â†’ iOS/Android
   ```

2. **Táº¡o QR code cho cÃ¡c mÃ¡y tÃ¡i cháº¿**
   ```
   https://www.qr-code-generator.com/
   ```

3. **In dÃ¡n QR code trÃªn mÃ¡y**
   ```
   CS1: {"points":75,"machineId":"CS1"}
   CS2: {"points":50,"machineId":"CS2"}
   KTX: {"points":100,"machineId":"KTX_A"}
   ```

4. **TÃ­ch há»£p Backend (tÃ¹y chá»n)**
   ```
   POST /api/qr/validate
   { "qrCode": "50", "machineId": "CS1" }
   ```

---

**Status**: âœ… Ready to Deploy
**Version**: 1.0.0
**Last Updated**: December 7, 2025
